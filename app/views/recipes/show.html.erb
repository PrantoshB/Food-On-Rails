<p style="color: green"><%= notice %></p>

<a href="<%=@recipe.id %>">
<h1> <%= @recipe.name %></h1>
</a>


<div>

  <p>
    Preparation Time: <%= @recipe.preparation_time %> hour
  </p>
  
<p>
  Cooking Time: <%= @recipe.cooking_time %> hour
</p>

<p>
  <%= @recipe.description %>
</p>

</div>

<% if can? :destroy , @recipe %>
<%= form_for @recipe, method: :patch do |f| %>
<div class="swith-btn">
  <p>Public : </p>
  <label class="switch">
  <div><%= f.submit "" %></div>
    <%= f.check_box :public, { checked: @recipe.public } %>
    <span class="slider round"></span>
  </label>
</div>
<% end %>
<% end %>


<% if can? :destroy , @recipe %>
<a href= <%= "/general_shopping_list" %>>
  <button>Generate shopping list</button>
</a>
<a href= <%= "/recipes/#{@recipe.id}/recipe_foods/new" %>>
<button>Add ingredient</button>
</a>
<% end %>

<table id="foods">
  <thead>
    <tr>
      <th scope="col">Food</th>
      <th scope="col">Quantity</th>
      <th scope="col">Value</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
    <tbody>
    <% @recipe.recipe_food.each do |recipe_food| %>
      <tr>
          <td><%= recipe_food.food.name %></td>
          <td><%= recipe_food.quantity %> <%= recipe_food.food.measurement_unit %></td>
          <td>$ <%= recipe_food.value %></td>
          <td class="d-flex gap-2">
          <% if can? :destroy , @recipe %>
            <%= link_to "Modify", edit_recipe_recipe_food_path(recipe_id: @recipe.id, id: recipe_food.id) %>
            <%= button_to "Remove", recipe_recipe_food_path(recipe_id: @recipe.id, id: recipe_food.id), method: :delete %>
          <% end %>
          </td>
      </tr>
    <% end %>
  </tbody>
</table>

